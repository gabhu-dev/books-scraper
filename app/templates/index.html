{% extends "base.html" %}
{% block contenido %}
<div>
    <form action="{{ url_for('main.index') }}" method="GET" class="flex flex-col md:flex-row gap-4 my-6 p-6 border border-gray-200 rounded-lg justify-center mx-6">
        <!--Buscador-->
        <input type="text" name="q" value="{{ request.args.get('q', '') }}" placeholder="Buscar libros..." class="p-2 px-4 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all">
        <!--Selector de categorías-->
        <div class="relative">
            <select name="category" class="w-full appearance-none py-2 pl-4 pr-10 border border-gray-200 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all cursor-pointer">
                <option value="">Todas las categorías</option>
                {% for category in categories %}
                <option value="{{ category.url }}" {% if request.args.get('category') == category.url %}selected{% endif %} class="hover:bg-indigo-100">{{ category.category }}</option>
                {% endfor %}
            </select>
            <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400">
                <i data-lucide="chevron-down" class="size-4"></i>
            </div>
        </div>
        <button type="submit" class="p-2 px-4 bg-indigo-600 text-white flex items-center gap-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all hover:bg-indigo-500">
            <i data-lucide="search" class="size-4"></i>
            Buscar
        </button>
    </form>
    <section class="flex-1 p-6">
        <div class="grid grid-cols-1 md:grid-cols-4 lg:grid-cols-6 gap-6">
            {% for book in books %}
            <a class="p-4 text-center transition-all border border-white rounded-lg hover:border-gray-100 hover:shadow-md" href="{{ url_for('main.book_details', url_detail=book.url_detail) }}">
                <img class="mb-4 border border-gray-200 rounded-lg w-full h-[20rem] md:h-[220px] object-cover" src="{{ book.image_url }}" alt="{{ book.title }}">
                <div class="flex gap-1 mb-2">
                    {% for i in range(5) %}
                        {% if i <= book.rating %}
                            <i data-lucide="star" class="size-3 text-amber-500 fill-amber-500"></i>
                        {% else %}
                            <i data-lucide="star" class="size-3 text-gray-300"></i>
                        {% endif %}
                    {% endfor %}
                </div>
                <h3 class="font-medium text-lg mb-2 text-left truncate text-indigo-950">{{ book.title }}</h3>
                <p class="font-semibold text-gray-600 mb-2 text-left text-pink-500">{{ book.price }}</p>
            </a>
            {% endfor %}
        </div>
    </section>
</div>
{% endblock %}